<html>
  <head>
    <meta charset="utf-8"> 
    <title>Runner Timer</title>
  </head>
  <body>
    <h1>Input in seconds for each timer</h1>
    <p>Run (seconds)</p>
    <input id='first' type="text" />
    <p>Walk (seconds, optional)</p>
    <input id='second' type="text" /><br /><br />
    <button id='play'>Start/stop</button><br /><br />
    <div id='feedback'></div>
    <audio id='run'>
      <source src="run.wav" type="audio/wav" />
    </audio>
    <audio id='stop'>
      <source src="stop.wav" type="audio/wav" />
    </audio>

    <script type="text/javascript">
      const first = document.getElementById('first')
      const second = document.getElementById('second')
      const play = document.getElementById('play')
      const run = document.getElementById('run')
      const stop = document.getElementById('stop')
      const feedback = document.getElementById('feedback')
      
      let interval, timeout
      let playing = false
      let which = run

      let runValue, stopValue

      function timer() {
        let time
        if (which == run) {
          feedback.innerHTML = 'Running'
          time = runValue
          which = stop
        } else {
          feedback.innerHTML = 'Walking'
          time = stopValue
          which = run
        }
        timeout = setTimeout(() => {
          which.play()
          timer()
        }, time)
      }

      play.addEventListener('click', () => {
        clearInterval(interval)
        clearTimeout(timeout)
        if (playing) {
          playing = false
          which = run
          feedback.innerHTML = 'Stopped'
        } else {
          runValue = parseInt(first.value) * 1000
          stopValue = parseInt(second.value) * 1000
          if (isNaN(runValue)) {
            feedback.innerHTML = 'Only numbers are allowed'
            return
          }

          playing = true
          run.play()
          if (isNaN(stopValue)) {
            feedback.innerHTML = 'Running (no number found for Walk)'
            interval = setInterval(() => {
              run.play()
            }, runValue)
            return
          } else {
            timer()
          }
        }
      })
    </script>
  </body>
</html>